# 地图高度编辑器

一个用于编辑地图地面高度并根据网格位置自动管理Token高度的Foundry VTT模组。

[English Documentation](README.md)

## 功能特性

### 高度绘制
- **点击绘制**: 点击网格方块设置其高度
- **拖拽绘制**: 点击并拖动以一次绘制多个网格方块
- **预设画笔**: 快速访问常用高度值 (0, 5, 10)
- **自定义高度**: 设置 -1000 到 1000 之间的任意高度值
- **可视化覆盖层**: 在地图上显示带颜色编码的高度值
  - 蓝色: 高度 0
  - 绿色: 正高度
  - 红色: 负高度

### 自动Token高度更新
- **自动更新**: Token移动到不同高度网格时自动更新其高度值
- **多网格支持**: 正确处理占据多个网格方块的Token
- **例外列表**: 管理飞行单位和其他应忽略自动高度更新的Token

### 数据管理
- **持久化存储**: 高度数据按场景保存在场景标志中
- **导入/导出**: 将高度数据导出为JSON文件以进行备份和共享
- **清除全部**: 一键重置所有高度数据

## 安装

### 方法1: 清单URL
1. 在Foundry VTT中，转到 **附加模组**
2. 点击 **安装模组**
3. 粘贴清单URL: `https://github.com/your-username/fvtt-map-height/releases/latest/download/module.json`
4. 点击 **安装**

### 方法2: 手动安装
1. 从 [发布页面](https://github.com/your-username/fvtt-map-height/releases) 下载最新版本
2. 将ZIP文件解压到Foundry的 `Data/modules` 目录
3. 重启Foundry VTT
4. 在世界中启用该模组

## 系统要求

- **Foundry VTT**: 版本 12.343 或更高
- **游戏系统**: 任意（系统无关）
- **地图类型**: 基于网格的地图（方形网格）

## 使用方法

### 入门指南

1. **激活模组**
   - 在世界的模组设置中启用"地图高度编辑器"
   - 模组界面将出现在侧边栏中（仅GM可见）

2. **启用高度编辑模式**
   - 点击"高度编辑模式"按钮激活编辑
   - 高度覆盖层将显示在画布上

3. **绘制高度**
   - 从工具栏选择画笔高度
   - 点击网格方块设置其高度
   - 或点击并拖动以绘制多个方块

4. **配置自动更新**
   - 启用"自动更新Token高度"以自动更新Token高度值
   - 将飞行单位添加到例外列表以防止自动更新

## 配置

### 模组设置

#### 自动更新Token高度
- **类型**: 世界设置（影响所有玩家）
- **默认值**: 启用
- **描述**: 当Token移动到不同高度网格时自动更新其高度值

#### 高度覆盖层透明度
- **类型**: 客户端设置（每个玩家独立）
- **默认值**: 0.7
- **范围**: 0.0 (透明) 到 1.0 (不透明)
- **描述**: 控制高度数字覆盖层的可见度

#### 默认画笔高度
- **类型**: 客户端设置（每个玩家独立）
- **默认值**: 0
- **范围**: -1000 到 1000
- **描述**: 模组首次激活时的默认高度值
